1). Закрывать сокеты (close). Может не закрыться
2). Использовать readn для чтения заданного кол-ва байт.

3). Один из вариантов закрытия сокета SO_LINGER (Не очень хороший вариант). 
	setcokopts(SO_REUSE_ADDR) - хороший вариант, для использования уже занятого сокета.
	shutdown - вызвать перед close, чтобы послать другой стороне сообщение о том, что все закончилось.


https://bgp.he.net/AS3267#_ix